{"code":"(this.webpackJsonpmydao=this.webpackJsonpmydao||[]).push([[9],{391:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"URI_AVAILABLE\",(function(){return h})),n.d(t,\"UserRejectedRequestError\",(function(){return d})),n.d(t,\"WalletConnectConnector\",(function(){return p}));var r=n(23);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function u(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return a=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o},a.apply(null,arguments)}function s(e){var t=\"function\"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!==typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(\"undefined\"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,e)},s(e)}function l(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var h=\"URI_AVAILABLE\",d=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message=\"The user rejected the request.\",t}return o(t,e),t}(s(Error));function f(e){var t=e.supportedChainIds,n=e.rpc;return t||(n?Object.keys(n).map((function(e){return Number(e)})):void 0)}var p=function(e){function t(t){var n;return(n=e.call(this,{supportedChainIds:f(t)})||this).config=t,n.handleChainChanged=n.handleChainChanged.bind(l(n)),n.handleAccountsChanged=n.handleAccountsChanged.bind(l(n)),n.handleDisconnect=n.handleDisconnect.bind(l(n)),n}o(t,e);var r=t.prototype;return r.handleChainChanged=function(e){this.emitUpdate({chainId:e})},r.handleAccountsChanged=function(e){this.emitUpdate({account:e[0]})},r.handleDisconnect=function(){this.emitDeactivate()},r.activate=function(){try{var e=this,t=function(){return e.walletConnectProvider.on(\"chainChanged\",e.handleChainChanged),e.walletConnectProvider.on(\"accountsChanged\",e.handleAccountsChanged),e.walletConnectProvider.on(\"disconnect\",e.handleDisconnect),Promise.resolve(e.walletConnectProvider.enable().then((function(e){return e[0]})).catch((function(e){if(\"User closed modal\"===e.message)throw new d;throw e}))).then((function(t){return{provider:e.walletConnectProvider,account:t}}))},r=function(){if(!e.walletConnectProvider)return Promise.resolve(Promise.all([n.e(0),n.e(4),n.e(11)]).then(n.bind(null,386)).then((function(e){var t;return null!=(t=null==e?void 0:e.default)?t:e}))).then((function(t){e.walletConnectProvider=new t(e.config)}))}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(o){return Promise.reject(o)}},r.getProvider=function(){try{return Promise.resolve(this.walletConnectProvider)}catch(e){return Promise.reject(e)}},r.getChainId=function(){try{return Promise.resolve(this.walletConnectProvider.chainId)}catch(e){return Promise.reject(e)}},r.getAccount=function(){try{return Promise.resolve(this.walletConnectProvider.accounts).then((function(e){return e[0]}))}catch(e){return Promise.reject(e)}},r.deactivate=function(){this.walletConnectProvider&&(this.walletConnectProvider.removeListener(\"disconnect\",this.handleDisconnect),this.walletConnectProvider.removeListener(\"chainChanged\",this.handleChainChanged),this.walletConnectProvider.removeListener(\"accountsChanged\",this.handleAccountsChanged),this.walletConnectProvider.disconnect())},r.close=function(){try{return this.emitDeactivate(),Promise.resolve()}catch(e){return Promise.reject(e)}},t}(r.a)}}]);","name":"static/js/9.82024b1a.chunk.js","map":{"version":3,"sources":["static/js/9.82024b1a.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","URI_AVAILABLE","UserRejectedRequestError","WalletConnectConnector","_web3_react_abstract_connector__WEBPACK_IMPORTED_MODULE_0__","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","call","e","_construct","Parent","args","Class","a","apply","instance","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","indexOf","TypeError","has","get","set","Wrapper","value","enumerable","writable","configurable","_assertThisInitialized","self","ReferenceError","_Error","_this","name","message","Error","getSupportedChains","_ref","supportedChainIds","rpc","keys","map","k","Number","_AbstractConnector","config","_this2","handleChainChanged","handleAccountsChanged","handleDisconnect","_proto","chainId","emitUpdate","accounts","account","emitDeactivate","activate","_this4","_temp3","walletConnectProvider","on","Promise","resolve","enable","then","error","provider","_temp4","all","m","_m$default","WalletConnectProvider","reject","getProvider","getChainId","getAccount","deactivate","removeListener","disconnect","close"],"mappings":"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"},"input":"(this[\"webpackJsonpmydao\"] = this[\"webpackJsonpmydao\"] || []).push([[9],{\n\n/***/ 391:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"URI_AVAILABLE\", function() { return URI_AVAILABLE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserRejectedRequestError\", function() { return UserRejectedRequestError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WalletConnectConnector\", function() { return WalletConnectConnector; });\n/* harmony import */ var _web3_react_abstract_connector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23);\n\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar URI_AVAILABLE = 'URI_AVAILABLE';\n\nvar UserRejectedRequestError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(UserRejectedRequestError, _Error);\n\n  function UserRejectedRequestError() {\n    var _this;\n\n    _this = _Error.call(this) || this;\n    _this.name = _this.constructor.name;\n    _this.message = 'The user rejected the request.';\n    return _this;\n  }\n\n  return UserRejectedRequestError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nfunction getSupportedChains(_ref) {\n  var supportedChainIds = _ref.supportedChainIds,\n      rpc = _ref.rpc;\n\n  if (supportedChainIds) {\n    return supportedChainIds;\n  }\n\n  return rpc ? Object.keys(rpc).map(function (k) {\n    return Number(k);\n  }) : undefined;\n}\n\nvar WalletConnectConnector = /*#__PURE__*/function (_AbstractConnector) {\n  _inheritsLoose(WalletConnectConnector, _AbstractConnector);\n\n  function WalletConnectConnector(config) {\n    var _this2;\n\n    _this2 = _AbstractConnector.call(this, {\n      supportedChainIds: getSupportedChains(config)\n    }) || this;\n    _this2.config = config;\n    _this2.handleChainChanged = _this2.handleChainChanged.bind(_assertThisInitialized(_this2));\n    _this2.handleAccountsChanged = _this2.handleAccountsChanged.bind(_assertThisInitialized(_this2));\n    _this2.handleDisconnect = _this2.handleDisconnect.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  var _proto = WalletConnectConnector.prototype;\n\n  _proto.handleChainChanged = function handleChainChanged(chainId) {\n    if (false) {}\n\n    this.emitUpdate({\n      chainId: chainId\n    });\n  };\n\n  _proto.handleAccountsChanged = function handleAccountsChanged(accounts) {\n    if (false) {}\n\n    this.emitUpdate({\n      account: accounts[0]\n    });\n  };\n\n  _proto.handleDisconnect = function handleDisconnect() {\n    if (false) {}\n\n    this.emitDeactivate();\n  };\n\n  _proto.activate = function activate() {\n    try {\n      var _this4 = this;\n\n      var _temp3 = function _temp3() {\n        _this4.walletConnectProvider.on('chainChanged', _this4.handleChainChanged);\n\n        _this4.walletConnectProvider.on('accountsChanged', _this4.handleAccountsChanged);\n\n        _this4.walletConnectProvider.on('disconnect', _this4.handleDisconnect);\n\n        return Promise.resolve(_this4.walletConnectProvider.enable().then(function (accounts) {\n          return accounts[0];\n        })[\"catch\"](function (error) {\n          // TODO ideally this would be a better check\n          if (error.message === 'User closed modal') {\n            throw new UserRejectedRequestError();\n          }\n\n          throw error;\n        })).then(function (account) {\n          return {\n            provider: _this4.walletConnectProvider,\n            account: account\n          };\n        });\n      };\n\n      var _temp4 = function () {\n        if (!_this4.walletConnectProvider) {\n          return Promise.resolve(Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(4), __webpack_require__.e(11)]).then(__webpack_require__.bind(null, 386)).then(function (m) {\n            var _m$default;\n\n            return (_m$default = m == null ? void 0 : m[\"default\"]) != null ? _m$default : m;\n          })).then(function (WalletConnectProvider) {\n            _this4.walletConnectProvider = new WalletConnectProvider(_this4.config);\n          });\n        }\n      }();\n\n      return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(_temp3) : _temp3(_temp4));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  _proto.getProvider = function getProvider() {\n    try {\n      var _this6 = this;\n\n      return Promise.resolve(_this6.walletConnectProvider);\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  _proto.getChainId = function getChainId() {\n    try {\n      var _this8 = this;\n\n      return Promise.resolve(_this8.walletConnectProvider.chainId);\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  _proto.getAccount = function getAccount() {\n    try {\n      var _this10 = this;\n\n      return Promise.resolve(_this10.walletConnectProvider.accounts).then(function (accounts) {\n        return accounts[0];\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  _proto.deactivate = function deactivate() {\n    if (this.walletConnectProvider) {\n      this.walletConnectProvider.removeListener('disconnect', this.handleDisconnect);\n      this.walletConnectProvider.removeListener('chainChanged', this.handleChainChanged);\n      this.walletConnectProvider.removeListener('accountsChanged', this.handleAccountsChanged);\n      this.walletConnectProvider.disconnect();\n    }\n  };\n\n  _proto.close = function close() {\n    try {\n      var _this12 = this;\n\n      _this12.emitDeactivate();\n\n      return Promise.resolve();\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  return WalletConnectConnector;\n}(_web3_react_abstract_connector__WEBPACK_IMPORTED_MODULE_0__[/* AbstractConnector */ \"a\"]);\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../src/index.ts"],"names":["URI_AVAILABLE","UserRejectedRequestError","_inheritsLoose","_this","name","constructor","message","Error","getSupportedChains","supportedChainIds","rpc","Object","keys","map","Number","k","undefined","WalletConnectConnector","config","_this2","handleChainChanged","bind","handleAccountsChanged","handleDisconnect","_proto","chainId","emitUpdate","accounts","account","emitDeactivate","activate","_this4","walletConnectProvider","on","enable","then","error","provider","m","WalletConnectProvider","getProvider","_this6","getChainId","Promise","resolve","_this8","getAccount","_this10","deactivate","removeListener","disconnect","close","_this12","AbstractConnector"],"mappings":"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","file":"x","sourcesContent":["import { ConnectorUpdate } from '@web3-react/types'\nimport { AbstractConnector } from '@web3-react/abstract-connector'\nimport { IWCEthRpcConnectionOptions } from '@walletconnect/types'\n\nexport const URI_AVAILABLE = 'URI_AVAILABLE'\n\nexport interface WalletConnectConnectorArguments extends IWCEthRpcConnectionOptions {\n  supportedChainIds?: number[]\n}\n\nexport class UserRejectedRequestError extends Error {\n  public constructor() {\n    super()\n    this.name = this.constructor.name\n    this.message = 'The user rejected the request.'\n  }\n}\n\nfunction getSupportedChains({ supportedChainIds, rpc }: WalletConnectConnectorArguments): number[] | undefined {\n  if (supportedChainIds) {\n    return supportedChainIds\n  }\n\n  return rpc ? Object.keys(rpc).map(k => Number(k)) : undefined\n}\n\nexport class WalletConnectConnector extends AbstractConnector {\n  private readonly config: WalletConnectConnectorArguments\n\n  public walletConnectProvider?: any\n\n  constructor(config: WalletConnectConnectorArguments) {\n    super({ supportedChainIds: getSupportedChains(config) })\n\n    this.config = config\n\n    this.handleChainChanged = this.handleChainChanged.bind(this)\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this)\n    this.handleDisconnect = this.handleDisconnect.bind(this)\n  }\n\n  private handleChainChanged(chainId: number | string): void {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId)\n    }\n    this.emitUpdate({ chainId })\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts)\n    }\n    this.emitUpdate({ account: accounts[0] })\n  }\n\n  private handleDisconnect(): void {\n    if (__DEV__) {\n      console.log(\"Handling 'disconnect' event\")\n    }\n    this.emitDeactivate()\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    if (!this.walletConnectProvider) {\n      const WalletConnectProvider = await import('@walletconnect/ethereum-provider').then(m => m?.default ?? m)\n      this.walletConnectProvider = new WalletConnectProvider(this.config)\n    }\n\n    this.walletConnectProvider.on('chainChanged', this.handleChainChanged)\n    this.walletConnectProvider.on('accountsChanged', this.handleAccountsChanged)\n    this.walletConnectProvider.on('disconnect', this.handleDisconnect)\n\n    const account = await this.walletConnectProvider\n      .enable()\n      .then((accounts: string[]): string => accounts[0])\n      .catch((error: Error): void => {\n        // TODO ideally this would be a better check\n        if (error.message === 'User closed modal') {\n          throw new UserRejectedRequestError()\n        }\n\n        throw error\n      })\n\n    return { provider: this.walletConnectProvider, account }\n  }\n\n  public async getProvider(): Promise<any> {\n    return this.walletConnectProvider\n  }\n\n  public async getChainId(): Promise<number | string> {\n    return Promise.resolve(this.walletConnectProvider.chainId)\n  }\n\n  public async getAccount(): Promise<null | string> {\n    return Promise.resolve(this.walletConnectProvider.accounts).then((accounts: string[]): string => accounts[0])\n  }\n\n  public deactivate() {\n    if (this.walletConnectProvider) {\n      this.walletConnectProvider.removeListener('disconnect', this.handleDisconnect)\n      this.walletConnectProvider.removeListener('chainChanged', this.handleChainChanged)\n      this.walletConnectProvider.removeListener('accountsChanged', this.handleAccountsChanged)\n      this.walletConnectProvider.disconnect()\n    }\n  }\n\n  public async close() {\n    this.emitDeactivate()\n  }\n}\n"]}}