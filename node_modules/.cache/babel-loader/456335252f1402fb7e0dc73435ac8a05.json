{"ast":null,"code":"import _asyncToGenerator from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _regeneratorRuntime from \"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/regenerator/index.js\";\nimport EventEmitter from \"eventemitter3\";\nimport WalletConnect from \"@walletconnect/client\";\nimport QRCodeModal from \"@walletconnect/qrcode-modal\";\nimport { IJsonRpcConnection } from \"@walletconnect/jsonrpc-types\";\nimport { formatJsonRpcError } from \"@walletconnect/jsonrpc-utils\";\nexport var SignerConnection = /*#__PURE__*/function (_IJsonRpcConnection) {\n  _inherits(SignerConnection, _IJsonRpcConnection);\n\n  var _super = _createSuper(SignerConnection);\n\n  function SignerConnection(opts) {\n    var _this;\n\n    _classCallCheck(this, SignerConnection);\n\n    _this = _super.call(this);\n    _this.events = new EventEmitter();\n    _this.accounts = [];\n    _this.chainId = 1;\n    _this.pending = false;\n    _this.bridge = \"https://bridge.walletconnect.org\";\n    _this.qrcode = true;\n    _this.qrcodeModalOptions = undefined;\n    _this.opts = opts;\n    _this.chainId = (opts === null || opts === void 0 ? void 0 : opts.chainId) || _this.chainId;\n    _this.wc = _this.register(opts);\n    return _this;\n  }\n\n  _createClass(SignerConnection, [{\n    key: \"connected\",\n    get: function get() {\n      return typeof this.wc !== \"undefined\" && this.wc.connected;\n    }\n  }, {\n    key: \"connecting\",\n    get: function get() {\n      return this.pending;\n    }\n  }, {\n    key: \"connector\",\n    get: function get() {\n      this.wc = this.register(this.opts);\n      return this.wc;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, listener) {\n      this.events.on(event, listener);\n    }\n  }, {\n    key: \"once\",\n    value: function once(event, listener) {\n      this.events.once(event, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      this.events.off(event, listener);\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(event, listener) {\n      this.events.removeListener(event, listener);\n    }\n  }, {\n    key: \"open\",\n    value: function () {\n      var _open = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(chainId) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.connected) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.onOpen();\n                return _context.abrupt(\"return\");\n\n              case 3:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this2.on(\"error\", function (err) {\n                    reject(err);\n                  });\n\n                  _this2.on(\"open\", function () {\n                    resolve();\n                  });\n\n                  _this2.create(chainId);\n                }));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function open(_x) {\n        return _open.apply(this, arguments);\n      }\n\n      return open;\n    }()\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof this.wc === \"undefined\")) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                if (this.wc.connected) {\n                  this.wc.killSession();\n                }\n\n                this.onClose();\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function close() {\n        return _close.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }, {\n    key: \"send\",\n    value: function () {\n      var _send = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(payload) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.wc = this.register(this.opts);\n\n                if (this.connected) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                _context3.next = 4;\n                return this.open();\n\n              case 4:\n                this.sendPayload(payload).then(function (res) {\n                  return _this3.events.emit(\"payload\", res);\n                }).catch(function (e) {\n                  return _this3.events.emit(\"payload\", formatJsonRpcError(payload.id, e.message));\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function send(_x2) {\n        return _send.apply(this, arguments);\n      }\n\n      return send;\n    }()\n  }, {\n    key: \"register\",\n    value: function register(opts) {\n      if (this.wc) return this.wc;\n      this.opts = opts || this.opts;\n      this.bridge = (opts === null || opts === void 0 ? void 0 : opts.connector) ? opts.connector.bridge : (opts === null || opts === void 0 ? void 0 : opts.bridge) || \"https://bridge.walletconnect.org\";\n      this.qrcode = typeof (opts === null || opts === void 0 ? void 0 : opts.qrcode) === \"undefined\" || opts.qrcode !== false;\n      this.chainId = typeof (opts === null || opts === void 0 ? void 0 : opts.chainId) !== \"undefined\" ? opts.chainId : this.chainId;\n      this.qrcodeModalOptions = opts === null || opts === void 0 ? void 0 : opts.qrcodeModalOptions;\n      var connectorOpts = {\n        bridge: this.bridge,\n        qrcodeModal: this.qrcode ? QRCodeModal : undefined,\n        qrcodeModalOptions: this.qrcodeModalOptions,\n        storageId: opts === null || opts === void 0 ? void 0 : opts.storageId,\n        signingMethods: opts === null || opts === void 0 ? void 0 : opts.signingMethods,\n        clientMeta: opts === null || opts === void 0 ? void 0 : opts.clientMeta\n      };\n      this.wc = typeof (opts === null || opts === void 0 ? void 0 : opts.connector) !== \"undefined\" ? opts.connector : new WalletConnect(connectorOpts);\n\n      if (typeof this.wc === \"undefined\") {\n        throw new Error(\"Failed to register WalletConnect connector\");\n      }\n\n      if (this.wc.accounts.length) {\n        this.accounts = this.wc.accounts;\n      }\n\n      if (this.wc.chainId) {\n        this.chainId = this.wc.chainId;\n      }\n\n      this.registerConnectorEvents();\n      return this.wc;\n    }\n  }, {\n    key: \"onOpen\",\n    value: function onOpen(wc) {\n      this.pending = false;\n\n      if (wc) {\n        this.wc = wc;\n      }\n\n      this.events.emit(\"open\");\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      this.pending = false;\n\n      if (this.wc) {\n        this.wc = undefined;\n      }\n\n      this.events.emit(\"close\");\n    }\n  }, {\n    key: \"onError\",\n    value: function onError(payload) {\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Failed or Rejected Request\";\n      var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -32000;\n      var errorPayload = {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        error: {\n          code: code,\n          message: message\n        }\n      };\n      this.events.emit(\"payload\", errorPayload);\n      return errorPayload;\n    }\n  }, {\n    key: \"create\",\n    value: function create(chainId) {\n      var _this4 = this;\n\n      this.wc = this.register(this.opts);\n      this.chainId = chainId || this.chainId;\n      if (this.connected || this.pending) return;\n      this.pending = true;\n      this.registerConnectorEvents();\n      this.wc.createSession({\n        chainId: this.chainId\n      }).then(function () {\n        return _this4.events.emit(\"created\");\n      }).catch(function (e) {\n        return _this4.events.emit(\"error\", e);\n      });\n    }\n  }, {\n    key: \"registerConnectorEvents\",\n    value: function registerConnectorEvents() {\n      var _this5 = this;\n\n      this.wc = this.register(this.opts);\n      this.wc.on(\"connect\", function (err) {\n        var _a, _b;\n\n        if (err) {\n          _this5.events.emit(\"error\", err);\n\n          return;\n        }\n\n        _this5.accounts = ((_a = _this5.wc) === null || _a === void 0 ? void 0 : _a.accounts) || [];\n        _this5.chainId = ((_b = _this5.wc) === null || _b === void 0 ? void 0 : _b.chainId) || _this5.chainId;\n\n        _this5.onOpen();\n      });\n      this.wc.on(\"disconnect\", function (err) {\n        if (err) {\n          _this5.events.emit(\"error\", err);\n\n          return;\n        }\n\n        _this5.onClose();\n      });\n      this.wc.on(\"modal_closed\", function () {\n        _this5.events.emit(\"error\", new Error(\"User closed modal\"));\n      });\n      this.wc.on(\"session_update\", function (error, payload) {\n        var _payload$params$ = payload.params[0],\n            accounts = _payload$params$.accounts,\n            chainId = _payload$params$.chainId;\n\n        if (!_this5.accounts || accounts && _this5.accounts !== accounts) {\n          _this5.accounts = accounts;\n\n          _this5.events.emit(\"accountsChanged\", accounts);\n        }\n\n        if (!_this5.chainId || chainId && _this5.chainId !== chainId) {\n          _this5.chainId = chainId;\n\n          _this5.events.emit(\"chainChanged\", chainId);\n        }\n      });\n    }\n  }, {\n    key: \"sendPayload\",\n    value: function () {\n      var _sendPayload = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(payload) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.wc = this.register(this.opts);\n                _context4.prev = 1;\n                _context4.next = 4;\n                return this.wc.unsafeSend(payload);\n\n              case 4:\n                response = _context4.sent;\n                return _context4.abrupt(\"return\", this.sanitizeResponse(response));\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](1);\n                return _context4.abrupt(\"return\", this.onError(payload, _context4.t0.message));\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 8]]);\n      }));\n\n      function sendPayload(_x3) {\n        return _sendPayload.apply(this, arguments);\n      }\n\n      return sendPayload;\n    }()\n  }, {\n    key: \"sanitizeResponse\",\n    value: function sanitizeResponse(response) {\n      return typeof response.error !== \"undefined\" && typeof response.error.code === \"undefined\" ? formatJsonRpcError(response.id, response.error.message) : response;\n    }\n  }]);\n\n  return SignerConnection;\n}(IJsonRpcConnection);\nexport default SignerConnection;","map":{"version":3,"mappings":"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","names":["EventEmitter","WalletConnect","QRCodeModal","IJsonRpcConnection","formatJsonRpcError","SignerConnection","opts","undefined","chainId","wc","register","connected","pending","event","listener","events","on","once","off","removeListener","onOpen","Promise","resolve","reject","err","create","killSession","onClose","payload","open","sendPayload","then","res","emit","catch","id","e","message","bridge","connector","qrcode","qrcodeModalOptions","connectorOpts","qrcodeModal","storageId","signingMethods","clientMeta","Error","accounts","length","registerConnectorEvents","code","errorPayload","jsonrpc","error","createSession","_a","_b","params","unsafeSend","response","sanitizeResponse","onError"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}