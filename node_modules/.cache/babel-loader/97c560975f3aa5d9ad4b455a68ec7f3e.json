{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _inherits = require(\"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/Users/cferte/Work/test-tuto/potatoDAO/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar events_1 = require(\"events\");\n\nfunction safeApply(handler, context, args) {\n  try {\n    Reflect.apply(handler, context, args);\n  } catch (err) {\n    // Throw error after timeout so as not to interrupt the stack\n    setTimeout(function () {\n      throw err;\n    });\n  }\n}\n\nfunction arrayClone(arr) {\n  var n = arr.length;\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; i += 1) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nvar SafeEventEmitter = /*#__PURE__*/function (_events_1$EventEmitte) {\n  _inherits(SafeEventEmitter, _events_1$EventEmitte);\n\n  var _super = _createSuper(SafeEventEmitter);\n\n  function SafeEventEmitter() {\n    _classCallCheck(this, SafeEventEmitter);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SafeEventEmitter, [{\n    key: \"emit\",\n    value: function emit(type) {\n      var doError = type === 'error';\n      var events = this._events;\n\n      if (events !== undefined) {\n        doError = doError && events.error === undefined;\n      } else if (!doError) {\n        return false;\n      } // If there is no 'error' event listener then throw.\n\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (doError) {\n        var er;\n\n        if (args.length > 0) {\n          er = args[0];\n        }\n\n        if (er instanceof Error) {\n          // Note: The comments on the `throw` lines are intentional, they show\n          // up in Node's output if this results in an unhandled exception.\n          throw er; // Unhandled 'error' event\n        } // At least give some kind of context to the user\n\n\n        var err = new Error(\"Unhandled error.\".concat(er ? \" (\".concat(er.message, \")\") : ''));\n        err.context = er;\n        throw err; // Unhandled 'error' event\n      }\n\n      var handler = events[type];\n\n      if (handler === undefined) {\n        return false;\n      }\n\n      if (typeof handler === 'function') {\n        safeApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler);\n\n        for (var i = 0; i < len; i += 1) {\n          safeApply(listeners[i], this, args);\n        }\n      }\n\n      return true;\n    }\n  }]);\n\n  return SafeEventEmitter;\n}(events_1.EventEmitter);\n\nexports.default = SafeEventEmitter;","map":{"version":3,"mappings":";;;;;;;;;;;;;;AAAA;;AAOA,SAASA,SAAT,CAAwCC,OAAxC,EAAgFC,OAAhF,EAA4FC,IAA5F,EAAmG;AACjG,MAAI;AACFC,WAAO,CAACC,KAAR,CAAcJ,OAAd,EAAuBC,OAAvB,EAAgCC,IAAhC;AACD,GAFD,CAEE,OAAOG,GAAP,EAAY;AACZ;AACAC,cAAU,CAAC,YAAK;AACd,YAAMD,GAAN;AACD,KAFS,CAAV;AAGD;AACF;;AAED,SAASE,UAAT,CAAwBC,GAAxB,EAAgC;AAC9B,MAAMC,CAAC,GAAGD,GAAG,CAACE,MAAd;AACA,MAAMC,IAAI,GAAG,IAAIC,KAAJ,CAAUH,CAAV,CAAb;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,CAApB,EAAuBI,CAAC,IAAI,CAA5B,EAA+B;AAC7BF,QAAI,CAACE,CAAD,CAAJ,GAAUL,GAAG,CAACK,CAAD,CAAb;AACD;;AACD,SAAOF,IAAP;AACD;;IAEoBG,gB;;;;;;;;;;;;;WACnB,cAAMC,IAAN,EAAkC;AAChC,UAAIC,OAAO,GAAGD,IAAI,KAAK,OAAvB;AAEA,UAAME,MAAM,GAAc,KAAaC,OAAvC;;AACA,UAAID,MAAM,KAAKE,SAAf,EAA0B;AACxBH,eAAO,GAAGA,OAAO,IAAIC,MAAM,CAACG,KAAP,KAAiBD,SAAtC;AACD,OAFD,MAEO,IAAI,CAACH,OAAL,EAAc;AACnB,eAAO,KAAP;AACD,OAR+B,CAUhC;;;AAVgC,wCAAXd,IAAW;AAAXA,YAAW;AAAA;;AAWhC,UAAIc,OAAJ,EAAa;AACX,YAAIK,EAAJ;;AACA,YAAInB,IAAI,CAACQ,MAAL,GAAc,CAAlB,EAAqB;AAClBW,YADkB,GACZnB,IADY;AAEpB;;AACD,YAAImB,EAAE,YAAYC,KAAlB,EAAyB;AACvB;AACA;AACA,gBAAMD,EAAN,CAHuB,CAGb;AACX,SATU,CAUX;;;AACA,YAAMhB,GAAG,GAAG,IAAIiB,KAAJ,2BAA6BD,EAAE,eAAQA,EAAE,CAACE,OAAX,SAAwB,EAAvD,EAAZ;AACClB,WAAW,CAACJ,OAAZ,GAAsBoB,EAAtB;AACD,cAAMhB,GAAN,CAbW,CAaA;AACZ;;AAED,UAAML,OAAO,GAAGiB,MAAM,CAACF,IAAD,CAAtB;;AAEA,UAAIf,OAAO,KAAKmB,SAAhB,EAA2B;AACzB,eAAO,KAAP;AACD;;AAED,UAAI,OAAOnB,OAAP,KAAmB,UAAvB,EAAmC;AACjCD,iBAAS,CAACC,OAAD,EAAU,IAAV,EAAgBE,IAAhB,CAAT;AACD,OAFD,MAEO;AACL,YAAMsB,GAAG,GAAGxB,OAAO,CAACU,MAApB;AACA,YAAMe,SAAS,GAAGlB,UAAU,CAACP,OAAD,CAA5B;;AACA,aAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,GAApB,EAAyBX,CAAC,IAAI,CAA9B,EAAiC;AAC/Bd,mBAAS,CAAC0B,SAAS,CAACZ,CAAD,CAAV,EAAe,IAAf,EAAqBX,IAArB,CAAT;AACD;AACF;;AAED,aAAO,IAAP;AACD;;;;EA7C2CwB,qB;;AAA9CC","names":["safeApply","handler","context","args","Reflect","apply","err","setTimeout","arrayClone","arr","n","length","copy","Array","i","SafeEventEmitter","type","doError","events","_events","undefined","error","er","Error","message","len","listeners","events_1","exports"],"sourceRoot":"","sources":["index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}